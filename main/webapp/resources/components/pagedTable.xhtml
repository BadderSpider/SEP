<?xml version="1.0" encoding="UTF-8"?>
<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:h="http://xmlns.jcp.org/jsf/html"
              xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
              xmlns:cc="http://xmlns.jcp.org/jsf/composite"
              xmlns:f="http://xmlns.jcp.org/jsf/core">

    <cc:interface>
        <cc:attribute name="bean" type="mitfahrboerse.model.presentation.beans.AbstractPagedTableBean" required="true"/>
    </cc:interface>

    <cc:implementation>
        <h:form id="f_table">

            <h:panelGroup id="p_searchControls" layout="block" styleClass="mb-3">
                <h:commandButton id="cb_search"
                                 value="#{msg['button.search']}"
                                 action="#{cc.attrs.bean.filter()}"
                                 styleClass="btn btn-primary w-100">
                    <f:ajax execute="@form" render="@form"/>
                </h:commandButton>
            </h:panelGroup>

            <h:dataTable id="d_data"
                         value="#{cc.attrs.bean.pagedItems}"
                         var="item"
                         styleClass="table table-striped table-hover">
                <cc:insertChildren/>
            </h:dataTable>

            <h:panelGroup id="p_pagination" styleClass="d-flex justify-content-center align-items-center gap-2 mt-3">
                <h:commandLink id="cb_first" value="&lt;&lt; 1"
                               action="#{cc.attrs.bean.goToPage(1)}"
                               disabled="#{cc.attrs.bean.isFirstPage()}"
                               styleClass="btn btn-sm btn-outline-secondary">
                    <f:ajax render="@form"/>
                </h:commandLink>

                <h:commandLink id="cb_prev" value="&lt;"
                               action="#{cc.attrs.bean.prevPage}"
                               disabled="#{cc.attrs.bean.isFirstPage()}"
                               styleClass="btn btn-sm btn-outline-secondary">
                    <f:ajax render="@form"/>
                </h:commandLink>

                <h:panelGroup id="p_gotoControls" styleClass="input-group input-group-sm w-auto">
                    <h:inputText id="it_gotoPage"
                                 value="#{cc.attrs.bean.currentPage}"
                                 styleClass="form-control text-center"
                                 style="width: 50px;"/>
                    <h:commandButton id="cb_goToPage"
                                     value="â†’"
                                     action="#{cc.attrs.bean.goToPage}"
                                     styleClass="btn btn-primary">
                        <f:ajax execute="it_gotoPage" render="@form"/>
                    </h:commandButton>
                </h:panelGroup>

                <h:commandLink id="cb_next" value="&gt;"
                               action="#{cc.attrs.bean.nextPage}"
                               disabled="#{cc.attrs.bean.isLastPage()}"
                               styleClass="btn btn-sm btn-outline-secondary">
                    <f:ajax render="@form"/>
                </h:commandLink>

                <h:commandLink id="cb_last" value="#{cc.attrs.bean.totalPages} &gt;&gt;"
                               action="#{cc.attrs.bean.goToPage(cc.attrs.bean.totalPages)}"
                               disabled="#{cc.attrs.bean.isLastPage()}"
                               styleClass="btn btn-sm btn-outline-secondary">
                    <f:ajax render="@form"/>
                </h:commandLink>
            </h:panelGroup>

        </h:form>
    </cc:implementation>
</ui:component>